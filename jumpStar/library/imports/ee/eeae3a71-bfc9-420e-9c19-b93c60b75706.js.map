{"version":3,"sources":["../../../../assets/scripts/assets/scripts/Player.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","exports","value","_a","cc","_decorator","ccclass","property","NewClass","_super","_this","apply","jumpHeight","jumpDuration","maxMoveSpeed","accel","accLeft","accRight","xSpeed","setJumpAction","jumpUp","moveBy","v2","easing","easeCubicActionOut","jumpDown","easeCubicActionIn","repeatForever","sequence","onLoad","jumpAction","node","runAction","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","update","dt","Math","abs","x","console","log","onDestroy","off","start","event","keyCode","macro","KEY","a","Component","default"],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AACA,IAAIA,YAAa,aAAQ,UAAKA,SAAd,IAA6B,YAAY;AACrD,QAAIC,iBAAgB,uBAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,yBAAgBG,OAAOC,cAAP,IACX,EAAEC,WAAW,EAAb,cAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,cAAEI,SAAF,GAAcH,CAAd;AAAkB,SAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,iBAAK,IAAIK,CAAT,IAAcL,CAAd;AAAiB,oBAAIA,EAAEM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,EAAEM,CAAF,IAAOL,EAAEK,CAAF,CAAP;AAA1C;AAAwD,SAF9E;AAGA,eAAOP,eAAcC,CAAd,EAAiBC,CAAjB,CAAP;AACH,KALD;AAMA,WAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,uBAAcC,CAAd,EAAiBC,CAAjB;AACA,iBAASO,EAAT,GAAc;AAAE,iBAAKC,WAAL,GAAmBT,CAAnB;AAAuB;AACvCA,UAAEU,SAAF,GAAcT,MAAM,IAAN,GAAaC,OAAOS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,GAAGE,SAAH,GAAeT,EAAES,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,KAJD;AAKH,CAZ2C,EAA5C;AAaA,IAAII,aAAc,aAAQ,UAAKA,UAAd,IAA6B,UAAUC,UAAV,EAAsBC,MAAtB,EAA8BC,GAA9B,EAAmCC,IAAnC,EAAyC;AACnF,QAAIC,IAAIC,UAAUC,MAAlB;AAAA,QAA0BC,IAAIH,IAAI,CAAJ,GAAQH,MAAR,GAAiBE,SAAS,IAAT,GAAgBA,OAAOd,OAAOmB,wBAAP,CAAgCP,MAAhC,EAAwCC,GAAxC,CAAvB,GAAsEC,IAArH;AAAA,QAA2HhB,CAA3H;AACA,QAAI,QAAOsB,OAAP,yCAAOA,OAAP,OAAmB,QAAnB,IAA+B,OAAOA,QAAQC,QAAf,KAA4B,UAA/D,EAA2EH,IAAIE,QAAQC,QAAR,CAAiBV,UAAjB,EAA6BC,MAA7B,EAAqCC,GAArC,EAA0CC,IAA1C,CAAJ,CAA3E,KACK,KAAK,IAAIQ,IAAIX,WAAWM,MAAX,GAAoB,CAAjC,EAAoCK,KAAK,CAAzC,EAA4CA,GAA5C;AAAiD,YAAIxB,IAAIa,WAAWW,CAAX,CAAR,EAAuBJ,IAAI,CAACH,IAAI,CAAJ,GAAQjB,EAAEoB,CAAF,CAAR,GAAeH,IAAI,CAAJ,GAAQjB,EAAEc,MAAF,EAAUC,GAAV,EAAeK,CAAf,CAAR,GAA4BpB,EAAEc,MAAF,EAAUC,GAAV,CAA5C,KAA+DK,CAAnE;AAAxE,KACL,OAAOH,IAAI,CAAJ,IAASG,CAAT,IAAclB,OAAOuB,cAAP,CAAsBX,MAAtB,EAA8BC,GAA9B,EAAmCK,CAAnC,CAAd,EAAqDA,CAA5D;AACH,CALD;AAMAlB,OAAOuB,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C,EAAEC,OAAO,IAAT,EAA7C;AACA,IAAIC,KAAKC,GAAGC,UAAZ;AAAA,IAAwBC,UAAUH,GAAGG,OAArC;AAAA,IAA8CC,WAAWJ,GAAGI,QAA5D;AACA,IAAIC,WAAW,aAAe,UAAUC,MAAV,EAAkB;AAC5CpC,cAAUmC,QAAV,EAAoBC,MAApB;AACA,aAASD,QAAT,GAAoB;AAChB,YAAIE,QAAQD,WAAW,IAAX,IAAmBA,OAAOE,KAAP,CAAa,IAAb,EAAmBlB,SAAnB,CAAnB,IAAoD,IAAhE;AACA;AACAiB,cAAME,UAAN,GAAmB,GAAnB;AACA;AACAF,cAAMG,YAAN,GAAqB,GAArB;AACA;AACAH,cAAMI,YAAN,GAAqB,GAArB;AACA;AACAJ,cAAMK,KAAN,GAAc,IAAd;AACAL,cAAMM,OAAN,GAAgB,KAAhB;AACAN,cAAMO,QAAN,GAAiB,KAAjB;AACAP,cAAMQ,MAAN,GAAe,IAAf;AACA,eAAOR,KAAP;AACA;AACH;AACD;AACA;AACAF,aAASvB,SAAT,CAAmBkC,aAAnB,GAAmC,YAAY;AAC3C;AACA,YAAIC,SAAShB,GAAGiB,MAAH,CAAU,KAAKR,YAAf,EAA6BT,GAAGkB,EAAH,CAAM,CAAN,EAAS,KAAKV,UAAd,CAA7B,EAAwDW,MAAxD,CAA+DnB,GAAGoB,kBAAH,EAA/D,CAAb;AACA;AACA,YAAIC,WAAWrB,GAAGiB,MAAH,CAAU,KAAKR,YAAf,EAA6BT,GAAGkB,EAAH,CAAM,CAAN,EAAS,CAAC,KAAKV,UAAf,CAA7B,EAAyDW,MAAzD,CAAgEnB,GAAGsB,iBAAH,EAAhE,CAAf;AACA;AACA,eAAOtB,GAAGuB,aAAH,CAAiBvB,GAAGwB,QAAH,CAAYR,MAAZ,EAAoBK,QAApB,CAAjB,CAAP;AACH,KAPD;AAQA;AACA;AACAjB,aAASvB,SAAT,CAAmB4C,MAAnB,GAA4B,YAAY;AACpC,YAAIC,aAAa,KAAKX,aAAL,EAAjB;AACA,aAAKY,IAAL,CAAUC,SAAV,CAAoBF,UAApB;AACA;AACA,aAAKd,OAAL,GAAe,KAAf;AACA,aAAKC,QAAL,GAAgB,KAAhB;AACA;AACA,aAAKC,MAAL,GAAc,CAAC,EAAf;AACA;AACAd,WAAG6B,WAAH,CAAeC,EAAf,CAAkB9B,GAAG+B,WAAH,CAAeC,SAAf,CAAyBC,QAA3C,EAAqD,KAAKC,SAA1D,EAAqE,IAArE;AACAlC,WAAG6B,WAAH,CAAeC,EAAf,CAAkB9B,GAAG+B,WAAH,CAAeC,SAAf,CAAyBG,MAA3C,EAAmD,KAAKC,OAAxD,EAAiE,IAAjE;AACH,KAXD;AAYAhC,aAASvB,SAAT,CAAmBwD,MAAnB,GAA4B,UAAUC,EAAV,EAAc;AACtC,YAAI,KAAK1B,OAAT,EAAkB;AACd,iBAAKE,MAAL,IAAe,KAAKH,KAAL,GAAa2B,EAA5B;AACH,SAFD,MAGK,IAAI,KAAKzB,QAAT,EAAmB;AACpB,iBAAKC,MAAL,IAAe,KAAKH,KAAL,GAAa2B,EAA5B;AACH;AACD,YAAIC,KAAKC,GAAL,CAAS,KAAK1B,MAAd,IAAwB,KAAKJ,YAAjC,EAA+C;AAC3C,iBAAKI,MAAL,GAAc,KAAKJ,YAAL,GAAoB,KAAKI,MAAzB,GAAkCyB,KAAKC,GAAL,CAAS,KAAK1B,MAAd,CAAhD;AACH;AACD,aAAKa,IAAL,CAAUc,CAAV,IAAe,KAAK3B,MAAL,GAAcwB,EAA7B;AACAI,gBAAQC,GAAR,CAAY,KAAKhB,IAAL,CAAUc,CAAtB,EAAyB,aAAzB;AACH,KAZD;AAaArC,aAASvB,SAAT,CAAmB+D,SAAnB,GAA+B,YAAY;AACvC5C,WAAG6B,WAAH,CAAegB,GAAf,CAAmB7C,GAAG+B,WAAH,CAAeC,SAAf,CAAyBC,QAA5C,EAAsD,KAAKC,SAA3D,EAAsE,IAAtE;AACAlC,WAAG6B,WAAH,CAAegB,GAAf,CAAmB7C,GAAG+B,WAAH,CAAeC,SAAf,CAAyBG,MAA5C,EAAoD,KAAKC,OAAzD,EAAkE,IAAlE;AACH,KAHD;AAIAhC,aAASvB,SAAT,CAAmBiE,KAAnB,GAA2B,YAAY,CACtC,CADD;AAEA1C,aAASvB,SAAT,CAAmBqD,SAAnB,GAA+B,UAAUa,KAAV,EAAiB;AAC5C,gBAAQA,MAAMC,OAAd;AACI,iBAAKhD,GAAGiD,KAAH,CAASC,GAAT,CAAaC,CAAlB;AACI,qBAAKvC,OAAL,GAAe,IAAf;AACA8B,wBAAQC,GAAR,CAAY,KAAK/B,OAAjB,EAA0B,cAA1B;AACA;AACJ,iBAAKZ,GAAGiD,KAAH,CAASC,GAAT,CAAa9E,CAAlB;AACI,qBAAKyC,QAAL,GAAgB,IAAhB;AACA;AACJ;AACI;AATR;AAWH,KAZD;AAaAT,aAASvB,SAAT,CAAmBuD,OAAnB,GAA6B,UAAUW,KAAV,EAAiB;AAC1C,gBAAQA,MAAMC,OAAd;AACI,iBAAKhD,GAAGiD,KAAH,CAASC,GAAT,CAAaC,CAAlB;AACI,qBAAKvC,OAAL,GAAe,KAAf;AACA;AACJ,iBAAKZ,GAAGiD,KAAH,CAASC,GAAT,CAAa9E,CAAlB;AACI,qBAAKyC,QAAL,GAAgB,KAAhB;AACA;AACJ;AACI;AARR;AAUH,KAXD;AAYA9B,eAAW,CACPoB,QADO,CAAX,EAEGC,SAASvB,SAFZ,EAEuB,YAFvB,EAEqC,KAAK,CAF1C;AAGAE,eAAW,CACPoB,QADO,CAAX,EAEGC,SAASvB,SAFZ,EAEuB,cAFvB,EAEuC,KAAK,CAF5C;AAGAE,eAAW,CACPoB,QADO,CAAX,EAEGC,SAASvB,SAFZ,EAEuB,cAFvB,EAEuC,KAAK,CAF5C;AAGAE,eAAW,CACPoB,QADO,CAAX,EAEGC,SAASvB,SAFZ,EAEuB,OAFvB,EAEgC,KAAK,CAFrC;AAGAE,eAAW,CACPoB,QADO,CAAX,EAEGC,SAASvB,SAFZ,EAEuB,SAFvB,EAEkC,KAAK,CAFvC;AAGAE,eAAW,CACPoB,QADO,CAAX,EAEGC,SAASvB,SAFZ,EAEuB,UAFvB,EAEmC,KAAK,CAFxC;AAGAE,eAAW,CACPoB,QADO,CAAX,EAEGC,SAASvB,SAFZ,EAEuB,QAFvB,EAEiC,KAAK,CAFtC;AAGAuB,eAAWrB,WAAW,CAClBmB,OADkB,CAAX,EAERE,QAFQ,CAAX;AAGA,WAAOA,QAAP;AACH,CA/G6B,CA+G5BJ,GAAGoD,SA/GyB,CAA9B;AAgHAvD,QAAQwD,OAAR,GAAkBjD,QAAlB","file":"Player.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["\"use strict\";\n// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar _a = cc._decorator, ccclass = _a.ccclass, property = _a.property;\nvar NewClass = /** @class */ (function (_super) {\n    __extends(NewClass, _super);\n    function NewClass() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        // 主角跳跃高度\n        _this.jumpHeight = 150;\n        // 主角跳跃持续时间\n        _this.jumpDuration = 0.3;\n        // 最大移动速度\n        _this.maxMoveSpeed = 400;\n        // 加速度\n        _this.accel = 1000;\n        _this.accLeft = false;\n        _this.accRight = false;\n        _this.xSpeed = 1000;\n        return _this;\n        // update (dt) {}\n    }\n    // @property\n    // dt: number;\n    NewClass.prototype.setJumpAction = function () {\n        // 跳跃上升\n        var jumpUp = cc.moveBy(this.jumpDuration, cc.v2(0, this.jumpHeight)).easing(cc.easeCubicActionOut());\n        // 下落\n        var jumpDown = cc.moveBy(this.jumpDuration, cc.v2(0, -this.jumpHeight)).easing(cc.easeCubicActionIn());\n        // 不断重复\n        return cc.repeatForever(cc.sequence(jumpUp, jumpDown));\n    };\n    ;\n    // LIFE-CYCLE CALLBACKS:\n    NewClass.prototype.onLoad = function () {\n        var jumpAction = this.setJumpAction();\n        this.node.runAction(jumpAction);\n        // 加速度方向开关\n        this.accLeft = false;\n        this.accRight = false;\n        // 主角当前水平方向速度\n        this.xSpeed = -10;\n        // 初始化键盘输入监听\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n    };\n    NewClass.prototype.update = function (dt) {\n        if (this.accLeft) {\n            this.xSpeed -= this.accel * dt;\n        }\n        else if (this.accRight) {\n            this.xSpeed += this.accel * dt;\n        }\n        if (Math.abs(this.xSpeed) > this.maxMoveSpeed) {\n            this.xSpeed = this.maxMoveSpeed * this.xSpeed / Math.abs(this.xSpeed);\n        }\n        this.node.x += this.xSpeed * dt;\n        console.log(this.node.x, 'this.node.x');\n    };\n    NewClass.prototype.onDestroy = function () {\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n        cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n    };\n    NewClass.prototype.start = function () {\n    };\n    NewClass.prototype.onKeyDown = function (event) {\n        switch (event.keyCode) {\n            case cc.macro.KEY.a:\n                this.accLeft = true;\n                console.log(this.accLeft, 'this.accLeft');\n                break;\n            case cc.macro.KEY.b:\n                this.accRight = true;\n                break;\n            default:\n                break;\n        }\n    };\n    NewClass.prototype.onKeyUp = function (event) {\n        switch (event.keyCode) {\n            case cc.macro.KEY.a:\n                this.accLeft = false;\n                break;\n            case cc.macro.KEY.b:\n                this.accRight = false;\n                break;\n            default:\n                break;\n        }\n    };\n    __decorate([\n        property\n    ], NewClass.prototype, \"jumpHeight\", void 0);\n    __decorate([\n        property\n    ], NewClass.prototype, \"jumpDuration\", void 0);\n    __decorate([\n        property\n    ], NewClass.prototype, \"maxMoveSpeed\", void 0);\n    __decorate([\n        property\n    ], NewClass.prototype, \"accel\", void 0);\n    __decorate([\n        property\n    ], NewClass.prototype, \"accLeft\", void 0);\n    __decorate([\n        property\n    ], NewClass.prototype, \"accRight\", void 0);\n    __decorate([\n        property\n    ], NewClass.prototype, \"xSpeed\", void 0);\n    NewClass = __decorate([\n        ccclass\n    ], NewClass);\n    return NewClass;\n}(cc.Component));\nexports.default = NewClass;\n"]}